---
title: 'AWS CloudWatch ì™„ë²½ ê°€ì´ë“œ'
date: '2026-01-26'
description: 'AWS CloudWatchë¥¼ ì´í•´í•˜ê³  Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¡œê·¸ ëª¨ë‹ˆí„°ë§ê³¼ ì•ŒëŒì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ëŠ” ì™„ë²½ ê°€ì´ë“œì…ë‹ˆë‹¤.'
tags: ['AWS', 'CloudWatch', 'Next.js', 'ëª¨ë‹ˆí„°ë§', 'ê°€ì´ë“œ', 'ë¡œê·¸', 'observability']
---

import { JsonLd } from '~/app/_components'

<JsonLd
  metadata={{
    title: 'AWS CloudWatch ì™„ë²½ ê°€ì´ë“œ',
    description: 'AWS CloudWatchë¥¼ ì´í•´í•˜ê³  Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¡œê·¸ ëª¨ë‹ˆí„°ë§ê³¼ ì•ŒëŒì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ëŠ” ì™„ë²½ ê°€ì´ë“œì…ë‹ˆë‹¤.',
    date: '2026-01-26',
    slug: 'aws-cloudwatch-guide',
    tags: ['AWS', 'CloudWatch', 'Next.js', 'ëª¨ë‹ˆí„°ë§', 'ê°€ì´ë“œ', 'ë¡œê·¸', 'observability'],
  }}
/>

## ğŸ“‹ ë¬¸ì„œ ì •ë³´

- **ë¬¸ì„œ ìœ í˜•**: Concept Explanation + How-To Guide
- **ëŒ€ìƒ ë…ì**: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì (ì´ˆê¸‰~ì¤‘ê¸‰)
- **ì£¼ìš” ëª©í‘œ**: CloudWatchë¥¼ ì´í•´í•˜ê³  Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§ì— í™œìš©
- **ì†Œìš” ì‹œê°„**: ì•½ 30ë¶„

---

## ê°œìš”

AWS CloudWatchëŠ” AWS ë¦¬ì†ŒìŠ¤ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” CloudWatchì˜ í•µì‹¬ ê°œë…ì„ ì´í•´í•˜ê³ , Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¡œê·¸ ëª¨ë‹ˆí„°ë§ê³¼ ì•ŒëŒì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤.

CloudWatchë¥¼ í™œìš©í•˜ë©´ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ë¥¼ ì¦‰ì‹œ íŒŒì•…í•˜ê³ , ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ì„ ë¶„ì„í•˜ë©°, ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## CloudWatchê°€ ë¬´ì—‡ì¸ê°€ìš”?

### í•µì‹¬ ê°œë…

CloudWatchëŠ” AWSì˜ **í†µí•© ëª¨ë‹ˆí„°ë§ ë° ê´€ì°°ì„± ì„œë¹„ìŠ¤**ì…ë‹ˆë‹¤. ì„œë²„, ë°ì´í„°ë² ì´ìŠ¤, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœë¥¼ í•œê³³ì—ì„œ ëª¨ë‹ˆí„°ë§í•˜ê³ , ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ìë™ìœ¼ë¡œ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°„ë‹¨íˆ ë§í•˜ë©´, CloudWatchëŠ” ì—¬ëŸ¬ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì„¤ì¹˜í•˜ëŠ” "ë¸”ë™ë°•ìŠ¤"ì™€ ê°™ìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ê¸°ë¡í•˜ê³ , ì´ìƒ ì§•í›„ë¥¼ ê°ì§€í•˜ë©´ ì•Œë ¤ì¤ë‹ˆë‹¤.

### ì™œ í•„ìš”í•œê°€ìš”?

í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì— ì§ë©´í•©ë‹ˆë‹¤:

- **ë¬¸ì œ íŒŒì•…ì˜ ì–´ë ¤ì›€**: ì‚¬ìš©ìê°€ "ì—ëŸ¬ê°€ ë‚¬ì–´ìš”"ë¼ê³  ë§í•˜ì§€ë§Œ, ì •í™•íˆ ë¬´ìŠ¨ ì—ëŸ¬ì¸ì§€ ëª¨ë¦„
- **ì„±ëŠ¥ ì €í•˜ ê°ì§€ ì§€ì—°**: í˜ì´ì§€ ë¡œë”©ì´ ëŠë ¤ì ¸ë„ ê°œë°œìëŠ” ëª¨ë¦„
- **ë°ì´í„° ì†ì‹¤**: ë¸Œë¼ìš°ì € ì½˜ì†” ë¡œê·¸ëŠ” ì‚¬ìš©ìê°€ ì°½ì„ ë‹«ìœ¼ë©´ ì‚¬ë¼ì§
- **íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì‹œê°„ ë‚­ë¹„**: ë¬¸ì œ ì¬í˜„ì´ ì–´ë ¤ì›Œ ë””ë²„ê¹…ì— ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¼

CloudWatchëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.

---

## CloudWatchì˜ ì£¼ìš” êµ¬ì„± ìš”ì†Œ

### 1. CloudWatch Logs (ë¡œê·¸)

ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  í™œë™ì„ ê¸°ë¡í•˜ëŠ” ì¥ì†Œì…ë‹ˆë‹¤.

```javascript
// ì˜ˆì‹œ: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°œìƒí•œ ë¡œê·¸
console.log('ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•¨'); // â†’ CloudWatch Logsì— ì €ì¥
console.error('ê²°ì œ API í˜¸ì¶œ ì‹¤íŒ¨'); // â†’ CloudWatch Logsì— ì €ì¥
```

**ì£¼ìš” ìš©ì–´**:
- **Log Group**: ë¡œê·¸ë¥¼ ë‹´ëŠ” í´ë” (ì˜ˆ: `/aws/lambda/my-function`)
- **Log Stream**: íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ë‚˜ ì„¸ì…˜ì˜ ë¡œê·¸ íë¦„
- **Log Event**: ê°œë³„ ë¡œê·¸ ë©”ì‹œì§€

### 2. CloudWatch Metrics (ë©”íŠ¸ë¦­)

ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ ìˆ«ìë¡œ ì¸¡ì •í•©ë‹ˆë‹¤.

**ê¸°ë³¸ ì œê³µ ë©”íŠ¸ë¦­**:
- CPU ì‚¬ìš©ë¥ 
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½
- HTTP ìš”ì²­ ìˆ˜

**ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­** (ì§ì ‘ ì •ì˜ ê°€ëŠ¥):
- API ì‘ë‹µ ì‹œê°„
- í˜ì´ì§€ ë¡œë”© ì‹œê°„
- ì‚¬ìš©ì ì•¡ì…˜ íšŸìˆ˜
- ì—ëŸ¬ ë°œìƒ ë¹ˆë„

### 3. CloudWatch Alarms (ì•ŒëŒ)

ë©”íŠ¸ë¦­ì´ íŠ¹ì • ì„ê³„ê°’ì„ ì´ˆê³¼í•˜ë©´ ìë™ìœ¼ë¡œ ì•Œë¦½ë‹ˆë‹¤.

```
ì˜ˆì‹œ ì•ŒëŒ ì„¤ì •:
- ì¡°ê±´: API ì—ëŸ¬ìœ¨ì´ 5%ë¥¼ ì´ˆê³¼í•˜ë©´
- ì•¡ì…˜: Slackìœ¼ë¡œ ì•Œë¦¼ ì „ì†¡ + ì´ë©”ì¼ ë°œì†¡
```

### 4. CloudWatch Dashboards (ëŒ€ì‹œë³´ë“œ)

ì—¬ëŸ¬ ë©”íŠ¸ë¦­ì„ ì‹œê°ì ìœ¼ë¡œ í•œëˆˆì— ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.

---

## ë™ì‘ ì›ë¦¬

CloudWatchëŠ” ë‹¤ìŒê³¼ ê°™ì€ íë¦„ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤:

```
1. ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¡œê·¸/ë©”íŠ¸ë¦­ ìƒì„±
   â†“
2. CloudWatchë¡œ ë°ì´í„° ì „ì†¡
   â†“
3. CloudWatchì— ë°ì´í„° ì €ì¥ ë° ë¶„ì„
   â†“
4. ëŒ€ì‹œë³´ë“œì—ì„œ ì‹œê°í™” ë˜ëŠ” ì•ŒëŒ íŠ¸ë¦¬ê±°
   â†“
5. ê°œë°œìì—ê²Œ ì•Œë¦¼ ì „ì†¡ (í•„ìš”ì‹œ)
```

### ì‹œê°ì  ì˜ˆì‹œ

```
[Next.js App] â”€â”€â”€ë¡œê·¸ ì „ì†¡â”€â”€â†’ [CloudWatch Logs]
     â”‚                              â”‚
     â”‚                              â”œâ”€â†’ [Log Insightsë¡œ ê²€ìƒ‰]
     â”‚                              â”‚
     â””â”€â”€ë©”íŠ¸ë¦­ ì „ì†¡â”€â”€â†’ [CloudWatch Metrics]
                                    â”‚
                                    â”œâ”€â†’ [ëŒ€ì‹œë³´ë“œì— í‘œì‹œ]
                                    â”‚
                                    â””â”€â†’ [ì•ŒëŒ í™•ì¸]
                                         â”‚
                                         â””â”€â†’ [Slack/Email ì•Œë¦¼]
```

---

## Next.jsì—ì„œ CloudWatch ì‚¬ìš©í•˜ê¸°

### ì‚¬ì „ ì¤€ë¹„

ë‹¤ìŒì´ ì¤€ë¹„ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:

- Node.js 18 ì´ìƒ
- AWS ê³„ì • ë° IAM ì‚¬ìš©ì (CloudWatch ê¶Œí•œ í•„ìš”)
- Next.js í”„ë¡œì íŠ¸
- AWS CLI ì„¤ì¹˜ ë° êµ¬ì„±

### 1ë‹¨ê³„: AWS SDK ì„¤ì¹˜

í”„ë¡œì íŠ¸ì— í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”:

```bash
npm install @aws-sdk/client-cloudwatch-logs
npm install winston winston-cloudwatch
```

**ì„¤ëª…**:
- `@aws-sdk/client-cloudwatch-logs`: AWS CloudWatch Logs API í´ë¼ì´ì–¸íŠ¸
- `winston`: Node.js ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬
- `winston-cloudwatch`: Winstonì—ì„œ CloudWatchë¡œ ë¡œê·¸ë¥¼ ì „ì†¡í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸

### 2ë‹¨ê³„: ë¡œê±° ì„¤ì •

`lib/logger.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”:

```typescript
import winston from 'winston';
import WinstonCloudWatch from 'winston-cloudwatch';

// CloudWatch ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ ì´ë¦„ ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)
const logStreamName = `next-app-${new Date().toISOString().split('T')[0]}`;

// Winston ë¡œê±° ìƒì„±
const logger = winston.createLogger({
  level: 'info', // ë¡œê·¸ ë ˆë²¨: debug < info < warn < error
  format: winston.format.json(), // JSON í˜•ì‹ìœ¼ë¡œ ë¡œê·¸ ì €ì¥
  transports: [
    // ì½˜ì†” ì¶œë ¥ (ê°œë°œ í™˜ê²½)
    new winston.transports.Console({
      format: winston.format.simple(),
    }),
  ],
});

// í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œë§Œ CloudWatch ì „ì†¡ í™œì„±í™”
if (process.env.NODE_ENV === 'production') {
  logger.add(
    new WinstonCloudWatch({
      logGroupName: '/aws/nextjs/my-app', // ë¡œê·¸ ê·¸ë£¹ ì´ë¦„
      logStreamName: logStreamName,
      awsRegion: process.env.AWS_REGION || 'ap-northeast-2', // ì„œìš¸ ë¦¬ì „
      awsAccessKeyId: process.env.AWS_ACCESS_KEY_ID,
      awsSecretKey: process.env.AWS_SECRET_ACCESS_KEY,
      messageFormatter: ({ level, message, meta }) => {
        // ë¡œê·¸ ë©”ì‹œì§€ í¬ë§· ì»¤ìŠ¤í„°ë§ˆì´ì§•
        return `[${level}] ${message} ${JSON.stringify(meta)}`;
      },
    })
  );
}

export default logger;
```

### 3ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env.local` íŒŒì¼ì— AWS ìê²© ì¦ëª…ì„ ì¶”ê°€í•˜ì„¸ìš”:

```bash
AWS_REGION=ap-northeast-2
AWS_ACCESS_KEY_ID=your_access_key_id
AWS_SECRET_ACCESS_KEY=your_secret_access_key
```

**ë³´ì•ˆ ì£¼ì˜ì‚¬í•­**:
- âš ï¸ `.env.local` íŒŒì¼ì€ ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”
- `.gitignore`ì— `.env.local`ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”
- í”„ë¡œë•ì…˜ì—ì„œëŠ” AWS IAM Role ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤

### 4ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¡œê±° ì‚¬ìš©

#### 4-1. API ë¼ìš°íŠ¸ì—ì„œ ë¡œê·¸ ê¸°ë¡

`app/api/users/route.ts`:

```typescript
import { NextRequest, NextResponse } from 'next/server';
import logger from '@/lib/logger';

export async function GET(request: NextRequest) {
  try {
    // 1. ìš”ì²­ ë¡œê·¸ ê¸°ë¡
    logger.info('ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ API í˜¸ì¶œ', {
      timestamp: new Date().toISOString(),
      userAgent: request.headers.get('user-agent'),
    });

    // 2. ë°ì´í„° ì¡°íšŒ
    const users = await fetchUsers();

    // 3. ì„±ê³µ ë¡œê·¸
    logger.info('ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì„±ê³µ', {
      count: users.length,
      timestamp: new Date().toISOString(),
    });

    return NextResponse.json(users);
  } catch (error) {
    // 4. ì—ëŸ¬ ë¡œê·¸ (ì¤‘ìš”!)
    logger.error('ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨', {
      error: error instanceof Error ? error.message : 'Unknown error',
      stack: error instanceof Error ? error.stack : undefined,
      timestamp: new Date().toISOString(),
    });

    return NextResponse.json(
      { error: 'ì‚¬ìš©ì ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤' },
      { status: 500 }
    );
  }
}
```

#### 4-2. í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì—ëŸ¬ ì¶”ì 

`components/UserList.tsx`:

```typescript
'use client';

import { useEffect, useState } from 'react';

export default function UserList() {
  const [users, setUsers] = useState([]);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    async function loadUsers() {
      try {
        const response = await fetch('/api/users');

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const data = await response.json();
        setUsers(data);

        // ì„±ê³µ ë¡œê·¸ë¥¼ ì„œë²„ë¡œ ì „ì†¡
        await fetch('/api/logs', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            level: 'info',
            message: 'ì‚¬ìš©ì ëª©ë¡ ë¡œë”© ì„±ê³µ',
            meta: { count: data.length },
          }),
        });
      } catch (error) {
        const errorMessage = error instanceof Error ? error.message : 'Unknown error';
        setError(errorMessage);

        // ì—ëŸ¬ ë¡œê·¸ë¥¼ ì„œë²„ë¡œ ì „ì†¡
        await fetch('/api/logs', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            level: 'error',
            message: 'ì‚¬ìš©ì ëª©ë¡ ë¡œë”© ì‹¤íŒ¨',
            meta: { error: errorMessage },
          }),
        });
      }
    }

    loadUsers();
  }, []);

  if (error) return <div>ì—ëŸ¬: {error}</div>;
  if (!users.length) return <div>ë¡œë”© ì¤‘...</div>;

  return (
    <ul>
      {users.map((user: any) => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}
```

#### 4-3. ë¡œê·¸ ì „ì†¡ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„±

`app/api/logs/route.ts`:

```typescript
import { NextRequest, NextResponse } from 'next/server';
import logger from '@/lib/logger';

export async function POST(request: NextRequest) {
  try {
    const { level, message, meta } = await request.json();

    // ë¡œê·¸ ë ˆë²¨ì— ë”°ë¼ ì ì ˆí•œ ë¡œê±° ë©”ì„œë“œ í˜¸ì¶œ
    switch (level) {
      case 'error':
        logger.error(message, meta);
        break;
      case 'warn':
        logger.warn(message, meta);
        break;
      case 'info':
      default:
        logger.info(message, meta);
        break;
    }

    return NextResponse.json({ success: true });
  } catch (error) {
    console.error('ë¡œê·¸ ì „ì†¡ ì‹¤íŒ¨:', error);
    return NextResponse.json(
      { success: false, error: 'Log transmission failed' },
      { status: 500 }
    );
  }
}
```

### 5ë‹¨ê³„: CloudWatch ë¡œê·¸ í™•ì¸

1. **AWS Consoleì— ë¡œê·¸ì¸**í•˜ì„¸ìš”
2. **CloudWatch ì„œë¹„ìŠ¤**ë¡œ ì´ë™í•˜ì„¸ìš”
3. ì™¼ìª½ ë©”ë‰´ì—ì„œ **Logs > Log groups**ë¥¼ ì„ íƒí•˜ì„¸ìš”
4. `/aws/nextjs/my-app` ë¡œê·¸ ê·¸ë£¹ì„ ì°¾ìœ¼ì„¸ìš”
5. ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ì„ í´ë¦­í•˜ë©´ **ì‹¤ì‹œê°„ ë¡œê·¸**ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

**ì˜ˆìƒ ê²°ê³¼**:
```json
{
  "level": "info",
  "message": "ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ API í˜¸ì¶œ",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "userAgent": "Mozilla/5.0..."
}
```

---

## CloudWatch Logs Insightsë¡œ ë¡œê·¸ ê²€ìƒ‰

### ê¸°ë³¸ ì¿¼ë¦¬

CloudWatch Consoleì—ì„œ **Logs Insights**ë¥¼ ì‚¬ìš©í•˜ë©´ ë¡œê·¸ë¥¼ ê°•ë ¥í•˜ê²Œ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### 1. ìµœê·¼ ì—ëŸ¬ ë¡œê·¸ ì°¾ê¸°

```sql
fields @timestamp, message, error
| filter level = "error"
| sort @timestamp desc
| limit 20
```

#### 2. íŠ¹ì • ì‹œê°„ëŒ€ì˜ ë¡œê·¸ í•„í„°ë§

```sql
fields @timestamp, message
| filter @timestamp >= "2024-01-15T00:00:00.000Z"
    and @timestamp < "2024-01-16T00:00:00.000Z"
| sort @timestamp desc
```

#### 3. API ì‘ë‹µ ì‹œê°„ ë¶„ì„

```sql
fields @timestamp, message, duration
| filter message like /API í˜¸ì¶œ/
| stats avg(duration) as avg_duration,
        max(duration) as max_duration,
        count() as request_count
  by bin(@timestamp, 1h)
```

#### 4. ì—ëŸ¬ ë¹ˆë„ ê³„ì‚°

```sql
fields @timestamp, error
| filter level = "error"
| stats count() as error_count by error
| sort error_count desc
```

---

## CloudWatch ì•ŒëŒ ì„¤ì •

### ì•ŒëŒ ìƒì„± ì˜ˆì‹œ: API ì—ëŸ¬ìœ¨ ëª¨ë‹ˆí„°ë§

**ì‹œë‚˜ë¦¬ì˜¤**: API ì—ëŸ¬ìœ¨ì´ 5%ë¥¼ ì´ˆê³¼í•˜ë©´ Slackìœ¼ë¡œ ì•Œë¦¼ ë°›ê¸°

#### 1ë‹¨ê³„: SNS í† í”½ ìƒì„±

```bash
# AWS CLIë¡œ SNS í† í”½ ìƒì„±
aws sns create-topic --name api-error-alerts

# ì´ë©”ì¼ êµ¬ë… ì¶”ê°€
aws sns subscribe \
  --topic-arn arn:aws:sns:ap-northeast-2:123456789:api-error-alerts \
  --protocol email \
  --notification-endpoint your-email@example.com
```

#### 2ë‹¨ê³„: ë©”íŠ¸ë¦­ í•„í„° ìƒì„±

CloudWatch Consoleì—ì„œ:

1. **Logs > Log groups** > `/aws/nextjs/my-app` ì„ íƒ
2. **Metric filters** íƒ­ í´ë¦­
3. **Create metric filter** í´ë¦­
4. **í•„í„° íŒ¨í„´** ì…ë ¥:
   ```
   [level = "error"]
   ```
5. **ë©”íŠ¸ë¦­ ì´ë¦„**: `APIErrorCount`
6. **ë©”íŠ¸ë¦­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤**: `NextJS/App`
7. **ë©”íŠ¸ë¦­ ê°’**: `1`

#### 3ë‹¨ê³„: ì•ŒëŒ ìƒì„±

1. **CloudWatch > Alarms > Create alarm** í´ë¦­
2. **ë©”íŠ¸ë¦­ ì„ íƒ**: `NextJS/App > APIErrorCount`
3. **ì¡°ê±´ ì„¤ì •**:
   - Threshold type: Static
   - Whenever APIErrorCount is: Greater than 10
   - Datapoints to alarm: 1 out of 1
4. **ì•Œë¦¼ ì„¤ì •**:
   - SNS í† í”½: `api-error-alerts` ì„ íƒ
5. **ì•ŒëŒ ì´ë¦„**: `API-Error-Rate-High`

**ê²°ê³¼**: 1ë¶„ ë™ì•ˆ ì—ëŸ¬ê°€ 10ê±´ ì´ìƒ ë°œìƒí•˜ë©´ ì´ë©”ì¼/Slack ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤.

---

## ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ ì „ì†¡

### í˜ì´ì§€ ë¡œë”© ì‹œê°„ ì¸¡ì •

`lib/metrics.ts`:

```typescript
import { CloudWatchClient, PutMetricDataCommand } from '@aws-sdk/client-cloudwatch';

const cloudwatch = new CloudWatchClient({
  region: process.env.AWS_REGION || 'ap-northeast-2',
  credentials: {
    accessKeyId: process.env.AWS_ACCESS_KEY_ID!,
    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY!,
  },
});

/**
 * CloudWatchì— ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ ì „ì†¡
 */
export async function sendMetric(
  metricName: string,
  value: number,
  unit: 'Seconds' | 'Count' | 'Milliseconds' = 'Count'
) {
  try {
    const command = new PutMetricDataCommand({
      Namespace: 'NextJS/Performance', // ë©”íŠ¸ë¦­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
      MetricData: [
        {
          MetricName: metricName,
          Value: value,
          Unit: unit,
          Timestamp: new Date(),
        },
      ],
    });

    await cloudwatch.send(command);
    console.log(`ë©”íŠ¸ë¦­ ì „ì†¡ ì„±ê³µ: ${metricName} = ${value}`);
  } catch (error) {
    console.error('ë©”íŠ¸ë¦­ ì „ì†¡ ì‹¤íŒ¨:', error);
  }
}
```

### ì‚¬ìš© ì˜ˆì‹œ

`app/page.tsx`:

```typescript
'use client';

import { useEffect } from 'react';

export default function Home() {
  useEffect(() => {
    // í˜ì´ì§€ ë¡œë”© ì‹œê°„ ì¸¡ì •
    if (typeof window !== 'undefined' && window.performance) {
      const loadTime = window.performance.timing.loadEventEnd -
                       window.performance.timing.navigationStart;

      // CloudWatchë¡œ ë©”íŠ¸ë¦­ ì „ì†¡
      fetch('/api/metrics', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          metricName: 'PageLoadTime',
          value: loadTime,
          unit: 'Milliseconds',
        }),
      });
    }
  }, []);

  return <div>ë©”ì¸ í˜ì´ì§€</div>;
}
```

`app/api/metrics/route.ts`:

```typescript
import { NextRequest, NextResponse } from 'next/server';
import { sendMetric } from '@/lib/metrics';

export async function POST(request: NextRequest) {
  try {
    const { metricName, value, unit } = await request.json();
    await sendMetric(metricName, value, unit);
    return NextResponse.json({ success: true });
  } catch (error) {
    console.error('ë©”íŠ¸ë¦­ ì „ì†¡ API ì—ëŸ¬:', error);
    return NextResponse.json({ success: false }, { status: 500 });
  }
}
```

---

## ì‹¤ì „ í™œìš© ì‚¬ë¡€

### ì‚¬ë¡€ 1: ì‹¤ì‹œê°„ ì—ëŸ¬ ëª¨ë‹ˆí„°ë§

**ëª©í‘œ**: í”„ë¡œë•ì…˜ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  JavaScript ì—ëŸ¬ë¥¼ CloudWatchì— ê¸°ë¡

**êµ¬í˜„**:

```typescript
// app/error-boundary.tsx
'use client';

import { useEffect } from 'react';

export default function GlobalErrorBoundary({
  error,
  reset,
}: {
  error: Error;
  reset: () => void;
}) {
  useEffect(() => {
    // ì—ëŸ¬ë¥¼ CloudWatchë¡œ ì „ì†¡
    fetch('/api/logs', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        level: 'error',
        message: 'Global error boundary caught an error',
        meta: {
          error: error.message,
          stack: error.stack,
          url: window.location.href,
          userAgent: navigator.userAgent,
        },
      }),
    });
  }, [error]);

  return (
    <div>
      <h2>ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
      <button onClick={reset}>ë‹¤ì‹œ ì‹œë„</button>
    </div>
  );
}
```

### ì‚¬ë¡€ 2: API ì‘ë‹µ ì‹œê°„ ì¶”ì 

**ëª©í‘œ**: ê° API ì—”ë“œí¬ì¸íŠ¸ì˜ í‰ê·  ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§

**êµ¬í˜„**:

```typescript
// middleware.ts
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

export function middleware(request: NextRequest) {
  const startTime = Date.now();

  // ì‘ë‹µ ìƒì„±
  const response = NextResponse.next();

  // ì‘ë‹µ ì‹œê°„ ê³„ì‚°
  const duration = Date.now() - startTime;

  // ì‘ë‹µ í—¤ë”ì— duration ì¶”ê°€ (ë¡œê¹… ìš©ë„)
  response.headers.set('X-Response-Time', `${duration}ms`);

  // CloudWatchë¡œ ë©”íŠ¸ë¦­ ì „ì†¡ (ë¹„ë™ê¸°)
  fetch('/api/metrics', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      metricName: 'APIResponseTime',
      value: duration,
      unit: 'Milliseconds',
    }),
  }).catch(console.error);

  return response;
}

export const config = {
  matcher: '/api/:path*', // API ë¼ìš°íŠ¸ì—ë§Œ ì ìš©
};
```

### ì‚¬ë¡€ 3: ì‚¬ìš©ì í–‰ë™ ë¶„ì„

**ëª©í‘œ**: ì£¼ìš” ì‚¬ìš©ì ì•¡ì…˜ì„ CloudWatch ë©”íŠ¸ë¦­ìœ¼ë¡œ ê¸°ë¡

**êµ¬í˜„**:

```typescript
// hooks/useAnalytics.ts
import { useCallback } from 'react';

export function useAnalytics() {
  const trackEvent = useCallback(async (eventName: string, metadata?: object) => {
    await fetch('/api/logs', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        level: 'info',
        message: `User event: ${eventName}`,
        meta: {
          event: eventName,
          timestamp: new Date().toISOString(),
          ...metadata,
        },
      }),
    });
  }, []);

  return { trackEvent };
}

// ì‚¬ìš© ì˜ˆì‹œ
function CheckoutButton() {
  const { trackEvent } = useAnalytics();

  const handleClick = async () => {
    // ì‚¬ìš©ì ì•¡ì…˜ ì¶”ì 
    await trackEvent('checkout_initiated', {
      cartValue: 50000,
      itemCount: 3,
    });

    // ì‹¤ì œ ì²´í¬ì•„ì›ƒ ë¡œì§
    window.location.href = '/checkout';
  };

  return <button onClick={handleClick}>ê²°ì œí•˜ê¸°</button>;
}
```

---

## ì¥ì ê³¼ í•œê³„

### ì¥ì 

- âœ… **í†µí•© ëª¨ë‹ˆí„°ë§**: AWSì˜ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ í•œê³³ì—ì„œ ëª¨ë‹ˆí„°ë§
- âœ… **ì‹¤ì‹œê°„ ì•Œë¦¼**: ë¬¸ì œ ë°œìƒ ì¦‰ì‹œ íŒ€ì—ê²Œ ì•Œë¦¼
- âœ… **ê°•ë ¥í•œ ê²€ìƒ‰**: Logs Insightsë¡œ ë³µì¡í•œ ì¿¼ë¦¬ ì‹¤í–‰
- âœ… **ìë™ í™•ì¥**: íŠ¸ë˜í”½ ì¦ê°€í•´ë„ ìë™ìœ¼ë¡œ í™•ì¥ë¨
- âœ… **ë¹„ìš© íš¨ìœ¨ì **: ì‚¬ìš©í•œ ë§Œí¼ë§Œ ë¹„ìš© ì§€ë¶ˆ
- âœ… **ì¥ê¸° ë³´ê´€**: ë¡œê·¸ë¥¼ S3ì— ì•„ì¹´ì´ë¹™í•˜ì—¬ ì¥ê¸° ë³´ê´€ ê°€ëŠ¥

### í•œê³„

- âš ï¸ **í•™ìŠµ ê³¡ì„ **: AWS ì„œë¹„ìŠ¤ì— ìµìˆ™í•˜ì§€ ì•Šìœ¼ë©´ ì´ˆê¸° ì„¤ì •ì´ ë³µì¡í•¨
- âš ï¸ **ë¹„ìš© ê´€ë¦¬ í•„ìš”**: ë¡œê·¸ê°€ ë§ìœ¼ë©´ ë¹„ìš©ì´ ì¦ê°€í•  ìˆ˜ ìˆìŒ
- âš ï¸ **ì§€ì—° ì‹œê°„**: ì‹¤ì‹œê°„ì´ì§€ë§Œ 1-2ì´ˆ ì •ë„ì˜ ì§€ì—°ì´ ìˆì„ ìˆ˜ ìˆìŒ
- âš ï¸ **AWS ì¢…ì†ì„±**: AWS ìƒíƒœê³„ì— Lock-inë¨

### íŠ¸ë ˆì´ë“œì˜¤í”„

**ì–¸ì œ CloudWatchë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜ìš”?**
- âœ… ì´ë¯¸ AWS ì¸í”„ë¼ë¥¼ ì‚¬ìš© ì¤‘ì¸ ê²½ìš°
- âœ… ì—¬ëŸ¬ AWS ì„œë¹„ìŠ¤ë¥¼ í†µí•© ëª¨ë‹ˆí„°ë§í•˜ë ¤ëŠ” ê²½ìš°
- âœ… ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ì•ˆì •ì„±ì´ í•„ìš”í•œ ê²½ìš°

**ì–¸ì œ ëŒ€ì•ˆì„ ê³ ë ¤í•´ì•¼ í•˜ë‚˜ìš”?**
- ğŸ¤” AWSë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° â†’ **Datadog, New Relic**
- ğŸ¤” ê°„ë‹¨í•œ ì—ëŸ¬ ì¶”ì ë§Œ í•„ìš”í•œ ê²½ìš° â†’ **Sentry, LogRocket**
- ğŸ¤” ì˜¤í”ˆì†ŒìŠ¤ ì†”ë£¨ì…˜ì„ ì„ í˜¸í•˜ëŠ” ê²½ìš° â†’ **Grafana + Loki**

---

## ë¹„ìš© ìµœì í™” íŒ

### 1. ë¡œê·¸ ë³´ì¡´ ê¸°ê°„ ì„¤ì •

```bash
# AWS CLIë¡œ ë¡œê·¸ ë³´ì¡´ ê¸°ê°„ì„ 30ì¼ë¡œ ì„¤ì •
aws logs put-retention-policy \
  --log-group-name /aws/nextjs/my-app \
  --retention-in-days 30
```

**íš¨ê³¼**: ì˜¤ë˜ëœ ë¡œê·¸ëŠ” ìë™ ì‚­ì œë˜ì–´ ìŠ¤í† ë¦¬ì§€ ë¹„ìš© ì ˆê°

### 2. ë¡œê·¸ ë ˆë²¨ ì¡°ì •

```typescript
// í”„ë¡œë•ì…˜ì—ì„œëŠ” info ì´ìƒë§Œ ê¸°ë¡
const logger = winston.createLogger({
  level: process.env.NODE_ENV === 'production' ? 'info' : 'debug',
  // ...
});
```

### 3. ë¶ˆí•„ìš”í•œ ë¡œê·¸ í•„í„°ë§

```typescript
// í—¬ìŠ¤ì²´í¬ ìš”ì²­ì€ ë¡œê·¸ì—ì„œ ì œì™¸
if (request.url.includes('/health')) {
  return NextResponse.json({ status: 'ok' });
}

logger.info('API ìš”ì²­', { ... });
```

### 4. ë¡œê·¸ ìƒ˜í”Œë§

```typescript
// 10% í™•ë¥ ë¡œë§Œ ë¡œê·¸ ê¸°ë¡ (íŠ¸ë˜í”½ì´ ë§¤ìš° ë§ì€ ê²½ìš°)
if (Math.random() < 0.1) {
  logger.info('ì‚¬ìš©ì í–‰ë™', { ... });
}
```

---

## ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: ë¡œê·¸ê°€ CloudWatchì— í‘œì‹œë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
- ë¡œì»¬ì—ì„œëŠ” ë¡œê·¸ê°€ ì½˜ì†”ì— ì¶œë ¥ë˜ì§€ë§Œ CloudWatchì—ëŠ” ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ

**ì›ì¸**:
1. AWS ìê²© ì¦ëª…ì´ ì˜ëª»ë¨
2. IAM ê¶Œí•œ ë¶€ì¡±
3. ë¡œê·¸ ê·¸ë£¹/ìŠ¤íŠ¸ë¦¼ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•**:

```bash
# 1. AWS ìê²© ì¦ëª… í™•ì¸
aws sts get-caller-identity

# 2. ë¡œê·¸ ê·¸ë£¹ ì¡´ì¬ í™•ì¸
aws logs describe-log-groups --log-group-name-prefix /aws/nextjs

# 3. ìˆ˜ë™ìœ¼ë¡œ ë¡œê·¸ ê·¸ë£¹ ìƒì„±
aws logs create-log-group --log-group-name /aws/nextjs/my-app
```

### ë¬¸ì œ 2: "Rate exceeded" ì—ëŸ¬

**ì¦ìƒ**:
```
ThrottlingException: Rate exceeded
```

**ì›ì¸**: ë„ˆë¬´ ë§ì€ ë¡œê·¸ë¥¼ ë¹ ë¥´ê²Œ ì „ì†¡í•¨

**í•´ê²° ë°©ë²•**:

```typescript
// ë¡œê·¸ ë°°ì¹˜ ì²˜ë¦¬ (winston-cloudwatch ì˜µì…˜)
new WinstonCloudWatch({
  logGroupName: '/aws/nextjs/my-app',
  logStreamName: logStreamName,
  uploadRate: 2000, // 2ì´ˆë§ˆë‹¤ ì—…ë¡œë“œ
  batchSize: 100,   // 100ê°œì”© ë¬¶ì–´ì„œ ì „ì†¡
  // ...
})
```

### ë¬¸ì œ 3: ë©”íŠ¸ë¦­ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ì„ ì „ì†¡í–ˆì§€ë§Œ CloudWatchì—ì„œ ë³´ì´ì§€ ì•ŠìŒ

**ì›ì¸**: ë©”íŠ¸ë¦­ ì „ì†¡ í›„ 1-2ë¶„ì˜ ì§€ì—° ì‹œê°„ì´ ìˆìŒ

**í•´ê²° ë°©ë²•**:
1. 5ë¶„ ì •ë„ ê¸°ë‹¤ë¦° í›„ ìƒˆë¡œê³ ì¹¨
2. AWS Consoleì—ì„œ ë©”íŠ¸ë¦­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì„ íƒí–ˆëŠ”ì§€ í™•ì¸
3. CLIë¡œ ë©”íŠ¸ë¦­ í™•ì¸:

```bash
aws cloudwatch list-metrics --namespace NextJS/Performance
```

---

## ë‹¤ìŒ ë‹¨ê³„

CloudWatchì˜ ê¸°ì´ˆë¥¼ ìµí˜”ë‹¤ë©´ ë‹¤ìŒ ì£¼ì œë¥¼ í•™ìŠµí•´ë³´ì„¸ìš”:

### ì‹¬í™” í•™ìŠµ
- [CloudWatch Container Insightsë¡œ ECS/EKS ëª¨ë‹ˆí„°ë§](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/ContainerInsights.html)
- [CloudWatch Syntheticsë¡œ ì‚¬ìš©ì ê²½í—˜ ëª¨ë‹ˆí„°ë§](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Synthetics_Canaries.html)
- [CloudWatch ServiceLensë¡œ ë¶„ì‚° ì¶”ì ](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/ServiceLens.html)

### ì‹¤ì „ í”„ë¡œì íŠ¸
- Next.js ì•±ì— ëŒ€ì‹œë³´ë“œ êµ¬ì¶•í•˜ê¸°
- Slack ì•Œë¦¼ ë´‡ ë§Œë“¤ê¸°
- ìë™í™”ëœ ì—ëŸ¬ ë¦¬í¬íŠ¸ ìƒì„±

### ê´€ë ¨ AWS ì„œë¹„ìŠ¤
- **AWS X-Ray**: ì• í”Œë¦¬ì¼€ì´ì…˜ ìš”ì²­ ì¶”ì  ë° ì„±ëŠ¥ ë¶„ì„
- **AWS CloudTrail**: AWS API í˜¸ì¶œ ê¸°ë¡ (ë³´ì•ˆ ê°ì‚¬)
- **Amazon EventBridge**: ì´ë²¤íŠ¸ ê¸°ë°˜ ìë™í™”

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [AWS CloudWatch ê³µì‹ ë¬¸ì„œ](https://docs.aws.amazon.com/cloudwatch/)
- [CloudWatch Logs Insights ì¿¼ë¦¬ ë¬¸ë²•](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CWL_QuerySyntax.html)
- [AWS SDK for JavaScript v3](https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/)

### ì»¤ë®¤ë‹ˆí‹°
- [AWS re:Post](https://repost.aws.com/) - AWS ê³µì‹ Q&A
- [AWS CloudWatch ë¸”ë¡œê·¸](https://aws.amazon.com/blogs/mt/)

### ë„êµ¬
- [CloudWatch Dashboard Templates](https://github.com/aws-samples/amazon-cloudwatch-dashboard-samples)
- [Winston Logger ë¬¸ì„œ](https://github.com/winstonjs/winston)

---

## ìš”ì•½

ì´ ê°€ì´ë“œì—ì„œ ë‹¤ë£¬ ë‚´ìš©:

1. âœ… CloudWatchì˜ í•µì‹¬ ê°œë… (Logs, Metrics, Alarms, Dashboards)
2. âœ… Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— CloudWatch Logs í†µí•©
3. âœ… CloudWatch Logs Insightsë¡œ ë¡œê·¸ ê²€ìƒ‰
4. âœ… CloudWatch Alarms ì„¤ì •ìœ¼ë¡œ ìë™ ì•Œë¦¼
5. âœ… ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ ì „ì†¡ ë° ëª¨ë‹ˆí„°ë§
6. âœ… ì‹¤ì „ í™œìš© ì‚¬ë¡€ (ì—ëŸ¬ ì¶”ì , ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§, ì‚¬ìš©ì ë¶„ì„)
7. âœ… ë¹„ìš© ìµœì í™” ë° ë¬¸ì œ í•´ê²°

ì´ì œ ì—¬ëŸ¬ë¶„ì˜ Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì— CloudWatchë¥¼ ì ìš©í•˜ì—¬ í”„ë¡œë•ì…˜ í™˜ê²½ì„ ë” ì•ˆì „í•˜ê³  íˆ¬ëª…í•˜ê²Œ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ‰

---

**ë²„ì „**: 1.0.0
**ìµœì¢… ìˆ˜ì •**: 2026-01-26
**ì‘ì„±ì**: Claude (Anthropic)
**ë¼ì´ì„ ìŠ¤**: MIT
